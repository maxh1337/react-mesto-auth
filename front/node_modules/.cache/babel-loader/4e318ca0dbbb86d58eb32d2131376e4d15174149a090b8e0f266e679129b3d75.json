{"ast":null,"code":"var _jsxFileName = \"C:\\\\\\u041A\\u0443\\u0440\\u0441\\u043E\\u0432\\u0430\\u044F\\\\album-auth\\\\front\\\\src\\\\components\\\\Popups\\\\EditUserPhotoPopup\\\\EditUserPhotoPopup.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useMutation } from 'react-query';\nimport { $api } from '../../../api/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EditUserPhotoPopup = _ref => {\n  _s();\n  let {\n    isVisible,\n    onClick,\n    refetch,\n    closeAllPopups\n  } = _ref;\n  const [avatar, setAvatar] = useState('');\n  const handleSubmit = e => {\n    e.preventDefault();\n    editAvatar();\n  };\n  const {\n    mutate: editAvatar\n  } = useMutation('Edit profile avatar', () => $api({\n    url: '/users/profile',\n    type: 'PUT',\n    body: {\n      avatar\n    },\n    auth: true\n  }), {\n    onSuccess() {\n      refetch();\n      closeAllPopups();\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: isVisible ? 'popup popup_opened' : 'popup',\n    onClick: () => {\n      onClick();\n      setAvatar('');\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"popup__container\",\n      onClick: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        title: \"close-button\",\n        type: \"reset\",\n        className: \"popup__close-button popup__close-button_parent-corners_straight\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"popup__title\",\n        children: \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"form\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"form__input\",\n          placeholder: \"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0443\",\n          value: avatar,\n          onChange: e => setAvatar(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 51,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          title: \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C\",\n          type: \"submit\",\n          className: \"popup__button form__button\",\n          children: \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 57,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 43,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 3\n  }, this);\n};\n_s(EditUserPhotoPopup, \"NFA/gwkb2erE6q4+SJbu97nQnlE=\", false, function () {\n  return [useMutation];\n});\n_c = EditUserPhotoPopup;\nexport default EditUserPhotoPopup;\nvar _c;\n$RefreshReg$(_c, \"EditUserPhotoPopup\");","map":{"version":3,"names":["React","useState","useMutation","$api","EditUserPhotoPopup","isVisible","onClick","refetch","closeAllPopups","avatar","setAvatar","handleSubmit","e","preventDefault","editAvatar","mutate","url","type","body","auth","onSuccess","stopPropagation","target","value"],"sources":["C:/Курсовая/album-auth/front/src/components/Popups/EditUserPhotoPopup/EditUserPhotoPopup.jsx"],"sourcesContent":["import React, { useState } from 'react'\r\nimport { useMutation } from 'react-query'\r\nimport { $api } from '../../../api/api'\r\n\r\nconst EditUserPhotoPopup = ({\r\n\tisVisible,\r\n\tonClick,\r\n\trefetch,\r\n\tcloseAllPopups,\r\n}) => {\r\n\tconst [avatar, setAvatar] = useState('')\r\n\r\n\tconst handleSubmit = e => {\r\n\t\te.preventDefault()\r\n\t\teditAvatar()\r\n\t}\r\n\r\n\tconst { mutate: editAvatar } = useMutation(\r\n\t\t'Edit profile avatar',\r\n\t\t() =>\r\n\t\t\t$api({\r\n\t\t\t\turl: '/users/profile',\r\n\t\t\t\ttype: 'PUT',\r\n\t\t\t\tbody: { avatar },\r\n\t\t\t\tauth: true,\r\n\t\t\t}),\r\n\t\t{\r\n\t\t\tonSuccess() {\r\n\t\t\t\trefetch()\r\n\t\t\t\tcloseAllPopups()\r\n\t\t\t},\r\n\t\t}\r\n\t)\r\n\r\n\treturn (\r\n\t\t<section\r\n\t\t\tclassName={isVisible ? 'popup popup_opened' : 'popup'}\r\n\t\t\tonClick={() => {\r\n\t\t\t\tonClick()\r\n\t\t\t\tsetAvatar('')\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t<div className=\"popup__container\" onClick={e => e.stopPropagation()}>\r\n\t\t\t\t<button\r\n\t\t\t\t\ttitle=\"close-button\"\r\n\t\t\t\t\ttype=\"reset\"\r\n\t\t\t\t\tclassName=\"popup__close-button popup__close-button_parent-corners_straight\"\r\n\t\t\t\t/>\r\n\t\t\t\t<h2 className=\"popup__title\">Обновить аватар</h2>\r\n\t\t\t\t<form onSubmit={handleSubmit} className=\"form\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclassName=\"form__input\"\r\n\t\t\t\t\t\tplaceholder=\"Ссылка на картинку\"\r\n\t\t\t\t\t\tvalue={avatar}\r\n\t\t\t\t\t\tonChange={e => setAvatar(e.target.value)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttitle=\"Обновить\"\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tclassName=\"popup__button form__button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tОбновить\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default EditUserPhotoPopup\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,IAAI,QAAQ,kBAAkB;AAAA;AAEvC,MAAMC,kBAAkB,GAAG,QAKrB;EAAA;EAAA,IALsB;IAC3BC,SAAS;IACTC,OAAO;IACPC,OAAO;IACPC;EACD,CAAC;EACA,MAAM,CAACC,MAAM,EAAEC,SAAS,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAExC,MAAMU,YAAY,GAAGC,CAAC,IAAI;IACzBA,CAAC,CAACC,cAAc,EAAE;IAClBC,UAAU,EAAE;EACb,CAAC;EAED,MAAM;IAAEC,MAAM,EAAED;EAAW,CAAC,GAAGZ,WAAW,CACzC,qBAAqB,EACrB,MACCC,IAAI,CAAC;IACJa,GAAG,EAAE,gBAAgB;IACrBC,IAAI,EAAE,KAAK;IACXC,IAAI,EAAE;MAAET;IAAO,CAAC;IAChBU,IAAI,EAAE;EACP,CAAC,CAAC,EACH;IACCC,SAAS,GAAG;MACXb,OAAO,EAAE;MACTC,cAAc,EAAE;IACjB;EACD,CAAC,CACD;EAED,oBACC;IACC,SAAS,EAAEH,SAAS,GAAG,oBAAoB,GAAG,OAAQ;IACtD,OAAO,EAAE,MAAM;MACdC,OAAO,EAAE;MACTI,SAAS,CAAC,EAAE,CAAC;IACd,CAAE;IAAA,uBAEF;MAAK,SAAS,EAAC,kBAAkB;MAAC,OAAO,EAAEE,CAAC,IAAIA,CAAC,CAACS,eAAe,EAAG;MAAA,wBACnE;QACC,KAAK,EAAC,cAAc;QACpB,IAAI,EAAC,OAAO;QACZ,SAAS,EAAC;MAAiE;QAAA;QAAA;QAAA;MAAA,QAC1E,eACF;QAAI,SAAS,EAAC,cAAc;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAAqB,eACjD;QAAM,QAAQ,EAAEV,YAAa;QAAC,SAAS,EAAC,MAAM;QAAA,wBAC7C;UACC,SAAS,EAAC,aAAa;UACvB,WAAW,EAAC,oGAAoB;UAChC,KAAK,EAAEF,MAAO;UACd,QAAQ,EAAEG,CAAC,IAAIF,SAAS,CAACE,CAAC,CAACU,MAAM,CAACC,KAAK;QAAE;UAAA;UAAA;UAAA;QAAA,QACxC,eACF;UACC,KAAK,EAAC,kDAAU;UAChB,IAAI,EAAC,QAAQ;UACb,SAAS,EAAC,4BAA4B;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAG9B;MAAA;QAAA;QAAA;QAAA;MAAA,QACH;IAAA;MAAA;MAAA;MAAA;IAAA;EACF;IAAA;IAAA;IAAA;EAAA,QACG;AAEZ,CAAC;AAAA,GA/DKnB,kBAAkB;EAAA,QAaQF,WAAW;AAAA;AAAA,KAbrCE,kBAAkB;AAiExB,eAAeA,kBAAkB;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}