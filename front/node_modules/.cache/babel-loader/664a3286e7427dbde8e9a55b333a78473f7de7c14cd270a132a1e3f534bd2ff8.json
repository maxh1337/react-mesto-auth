{"ast":null,"code":"var _jsxFileName = \"C:\\\\PET Projects\\\\\\u041A\\u0443\\u0440\\u0441\\u043E\\u0432\\u044B\\u0435\\\\react-mesto-auth\\\\front\\\\src\\\\components\\\\Popups\\\\EditUserPhotoPopup\\\\EditUserPhotoPopup.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState } from 'react';\nimport { useMutation } from 'react-query';\nimport { $api } from '../../../api/api';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst EditUserPhotoPopup = _ref => {\n  _s();\n  let {\n    isVisible,\n    onClick,\n    refetch,\n    closeAllPopups\n  } = _ref;\n  const [url, setUrl] = useState('');\n  const handleSubmit = e => {\n    e.preventDefault();\n    editAvatar();\n  };\n  const {\n    mutate: editAvatar\n  } = useMutation('Edit profile avatar', () => $api({\n    url: '/users/profile',\n    type: 'PUT',\n    body: {\n      url\n    },\n    auth: true\n  }), {\n    onSuccess() {\n      refetch();\n      closeAllPopups();\n    }\n  });\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    className: isVisible ? 'popup popup_opened' : 'popup',\n    onClick: () => {\n      onClick();\n      setUrl('');\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"popup__container\",\n      onClick: e => e.stopPropagation(),\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        title: \"close-button\",\n        type: \"reset\",\n        className: \"popup__close-button popup__close-button_parent-corners_straight\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        className: \"popup__title\",\n        children: \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C \\u0430\\u0432\\u0430\\u0442\\u0430\\u0440\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 44,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleSubmit,\n        className: \"form\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          className: \"form__input\",\n          placeholder: \"\\u0421\\u0441\\u044B\\u043B\\u043A\\u0430 \\u043D\\u0430 \\u043A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0443\",\n          value: url,\n          onChange: e => setUrl(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 46,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          title: \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C\",\n          type: \"submit\",\n          className: \"popup__button form__button\",\n          children: \"\\u041E\\u0431\\u043D\\u043E\\u0432\\u0438\\u0442\\u044C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 52,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 45,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 3\n  }, this);\n};\n_s(EditUserPhotoPopup, \"WYjqVrQR2nCsFc/ZtVbK5bnaUvc=\", false, function () {\n  return [useMutation];\n});\n_c = EditUserPhotoPopup;\nexport default EditUserPhotoPopup;\nvar _c;\n$RefreshReg$(_c, \"EditUserPhotoPopup\");","map":{"version":3,"names":["React","useState","useMutation","$api","EditUserPhotoPopup","isVisible","onClick","refetch","closeAllPopups","url","setUrl","handleSubmit","e","preventDefault","editAvatar","mutate","type","body","auth","onSuccess","stopPropagation","target","value"],"sources":["C:/PET Projects/Курсовые/react-mesto-auth/front/src/components/Popups/EditUserPhotoPopup/EditUserPhotoPopup.jsx"],"sourcesContent":["import React, { useState } from 'react'\r\nimport { useMutation } from 'react-query'\r\nimport { $api } from '../../../api/api'\r\n\r\nconst EditUserPhotoPopup = ({ isVisible, onClick, refetch, closeAllPopups }) => {\r\n\tconst [url, setUrl] = useState('')\r\n\r\n\tconst handleSubmit = e => {\r\n\t\te.preventDefault()\r\n        editAvatar()\r\n\t}\r\n\r\n\tconst { mutate: editAvatar } = useMutation(\r\n\t\t'Edit profile avatar',\r\n\t\t() =>\r\n\t\t\t$api({\r\n\t\t\t\turl: '/users/profile',\r\n\t\t\t\ttype: 'PUT',\r\n\t\t\t\tbody: { url },\r\n\t\t\t\tauth: true,\r\n\t\t\t}),\r\n\t\t{\r\n            onSuccess(){\r\n                refetch()\r\n                closeAllPopups()\r\n            }\r\n        }\r\n\t)\r\n\r\n\treturn (\r\n\t\t<section\r\n\t\t\tclassName={isVisible ? 'popup popup_opened' : 'popup'}\r\n\t\t\tonClick={() => {\r\n\t\t\t\tonClick()\r\n\t\t\t\tsetUrl('')\r\n\t\t\t}}\r\n\t\t>\r\n\t\t\t<div className=\"popup__container\" onClick={e => e.stopPropagation()}>\r\n\t\t\t\t<button\r\n\t\t\t\t\ttitle=\"close-button\"\r\n\t\t\t\t\ttype=\"reset\"\r\n\t\t\t\t\tclassName=\"popup__close-button popup__close-button_parent-corners_straight\"\r\n\t\t\t\t/>\r\n\t\t\t\t<h2 className=\"popup__title\">Обновить аватар</h2>\r\n\t\t\t\t<form onSubmit={handleSubmit} className=\"form\">\r\n\t\t\t\t\t<input\r\n\t\t\t\t\t\tclassName=\"form__input\"\r\n\t\t\t\t\t\tplaceholder=\"Ссылка на картинку\"\r\n\t\t\t\t\t\tvalue={url}\r\n\t\t\t\t\t\tonChange={e => setUrl(e.target.value)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t<button\r\n\t\t\t\t\t\ttitle=\"Обновить\"\r\n\t\t\t\t\t\ttype=\"submit\"\r\n\t\t\t\t\t\tclassName=\"popup__button form__button\"\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\tОбновить\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</form>\r\n\t\t\t</div>\r\n\t\t</section>\r\n\t)\r\n}\r\n\r\nexport default EditUserPhotoPopup\r\n"],"mappings":";;AAAA,OAAOA,KAAK,IAAIC,QAAQ,QAAQ,OAAO;AACvC,SAASC,WAAW,QAAQ,aAAa;AACzC,SAASC,IAAI,QAAQ,kBAAkB;AAAA;AAEvC,MAAMC,kBAAkB,GAAG,QAAqD;EAAA;EAAA,IAApD;IAAEC,SAAS;IAAEC,OAAO;IAAEC,OAAO;IAAEC;EAAe,CAAC;EAC1E,MAAM,CAACC,GAAG,EAAEC,MAAM,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAElC,MAAMU,YAAY,GAAGC,CAAC,IAAI;IACzBA,CAAC,CAACC,cAAc,EAAE;IACZC,UAAU,EAAE;EACnB,CAAC;EAED,MAAM;IAAEC,MAAM,EAAED;EAAW,CAAC,GAAGZ,WAAW,CACzC,qBAAqB,EACrB,MACCC,IAAI,CAAC;IACJM,GAAG,EAAE,gBAAgB;IACrBO,IAAI,EAAE,KAAK;IACXC,IAAI,EAAE;MAAER;IAAI,CAAC;IACbS,IAAI,EAAE;EACP,CAAC,CAAC,EACH;IACUC,SAAS,GAAE;MACPZ,OAAO,EAAE;MACTC,cAAc,EAAE;IACpB;EACJ,CAAC,CACP;EAED,oBACC;IACC,SAAS,EAAEH,SAAS,GAAG,oBAAoB,GAAG,OAAQ;IACtD,OAAO,EAAE,MAAM;MACdC,OAAO,EAAE;MACTI,MAAM,CAAC,EAAE,CAAC;IACX,CAAE;IAAA,uBAEF;MAAK,SAAS,EAAC,kBAAkB;MAAC,OAAO,EAAEE,CAAC,IAAIA,CAAC,CAACQ,eAAe,EAAG;MAAA,wBACnE;QACC,KAAK,EAAC,cAAc;QACpB,IAAI,EAAC,OAAO;QACZ,SAAS,EAAC;MAAiE;QAAA;QAAA;QAAA;MAAA,QAC1E,eACF;QAAI,SAAS,EAAC,cAAc;QAAA;MAAA;QAAA;QAAA;QAAA;MAAA,QAAqB,eACjD;QAAM,QAAQ,EAAET,YAAa;QAAC,SAAS,EAAC,MAAM;QAAA,wBAC7C;UACC,SAAS,EAAC,aAAa;UACvB,WAAW,EAAC,oGAAoB;UAChC,KAAK,EAAEF,GAAI;UACX,QAAQ,EAAEG,CAAC,IAAIF,MAAM,CAACE,CAAC,CAACS,MAAM,CAACC,KAAK;QAAE;UAAA;UAAA;UAAA;QAAA,QACrC,eACF;UACC,KAAK,EAAC,kDAAU;UAChB,IAAI,EAAC,QAAQ;UACb,SAAS,EAAC,4BAA4B;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAG9B;MAAA;QAAA;QAAA;QAAA;MAAA,QACH;IAAA;MAAA;MAAA;MAAA;IAAA;EACF;IAAA;IAAA;IAAA;EAAA,QACG;AAEZ,CAAC;AAAA,GA1DKlB,kBAAkB;EAAA,QAQQF,WAAW;AAAA;AAAA,KARrCE,kBAAkB;AA4DxB,eAAeA,kBAAkB;AAAA;AAAA"},"metadata":{},"sourceType":"module","externalDependencies":[]}